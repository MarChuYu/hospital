"use strict";(globalThis["webpackChunkfront"]=globalThis["webpackChunkfront"]||[]).push([[908],{5908:(e,o,t)=>{t.r(o),t.d(o,{default:()=>J});var a=t(9835),l=t(6970);const i=["href"],r=(0,a._)("div",{class:"text-h6"},"Crear categoria",-1),c={class:"row"},n={class:"col-12 col-md-6"},s={class:"row"},d={class:"col-12"},g={class:"col-12 flex flex-center"},p={class:"col-12 col-md-6 flex flex-center"},u=(0,a._)("div",{class:"text-h6"},"Modificar categoria",-1),m={class:"row"},h={class:"col-12 col-md-6"},y={class:"col-12 col-md-6 flex flex-center"},f=(0,a._)("div",{class:"text-h6"},"Modificar categoria",-1),w={class:"row"},_={class:"col-12 flex flex-center"};function b(e,o,t,b,W,q){const v=(0,a.up)("q-btn"),C=(0,a.up)("q-icon"),k=(0,a.up)("q-input"),U=(0,a.up)("q-avatar"),x=(0,a.up)("q-item-section"),D=(0,a.up)("q-item-label"),$=(0,a.up)("q-item"),V=(0,a.up)("q-list"),Z=(0,a.up)("q-btn-dropdown"),Q=(0,a.up)("q-td"),P=(0,a.up)("q-chip"),j=(0,a.up)("q-img"),S=(0,a.up)("q-table"),F=(0,a.up)("q-card-section"),R=(0,a.up)("q-space"),A=(0,a.up)("q-uploader"),I=(0,a.up)("q-color"),M=(0,a.up)("q-card-actions"),G=(0,a.up)("q-form"),E=(0,a.up)("q-card"),T=(0,a.up)("q-dialog"),z=(0,a.up)("q-page"),N=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(z,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[(0,a.Wm)(S,{rows:W.categories,dense:"",columns:W.categoriesColumns,filter:W.categoryFilter,"rows-per-page-options":[0]},{"top-right":(0,a.w5)((()=>[(0,a.Wm)(v,{onClick:q.categoryAdd,loading:W.loading,color:"primary",label:"Crear categoria","no-caps":"",icon:"add_circle_outline",dens:""},null,8,["onClick","loading"]),(0,a.Wm)(k,{modelValue:W.categoryFilter,"onUpdate:modelValue":o[0]||(o[0]=e=>W.categoryFilter=e),label:"Filtrar",dense:"",outlined:""},{append:(0,a.w5)((()=>[(0,a.Wm)(C,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-options":(0,a.w5)((e=>[(0,a.Wm)(Q,{props:e,"auto-width":""},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{label:"Opciones",color:"primary","no-caps":""},{default:(0,a.w5)((()=>[(0,a.Wm)(V,null,{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)($,{clickable:"",onClick:o=>q.categoryUpdateClick(e.row)},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{icon:"o_edit"})])),_:1}),(0,a.Wm)(x,null,{default:(0,a.w5)((()=>[(0,a.Wm)(D,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Modificar")])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[N]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)($,{clickable:"",onClick:o=>q.categoryDelete(e.row)},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{icon:"o_delete"})])),_:1}),(0,a.Wm)(x,null,{default:(0,a.w5)((()=>[(0,a.Wm)(D,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Eliminar")])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[N]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)($,{clickable:"",onClick:o=>q.categoryUpdateClickPhoto(e.row)},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{icon:"o_photo"})])),_:1}),(0,a.Wm)(x,null,{default:(0,a.w5)((()=>[(0,a.Wm)(D,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Cambiar foto")])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[N]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-color":(0,a.w5)((e=>[(0,a.Wm)(Q,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(P,{class:"text-bold text-white",style:(0,l.j5)(`background: ${e.row.color};`)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.row.color),1)])),_:2},1032,["style"])])),_:2},1032,["props"])])),"body-cell-photo":(0,a.w5)((e=>[(0,a.Wm)(Q,{props:e,class:"text-center"},{default:(0,a.w5)((()=>[(0,a._)("a",{href:`${W.url}../imagenes/${e.row.photo}`,target:"_blank"},[(0,a._)("div",{class:"text-center",style:(0,l.j5)(`background: ${e.row.color}`)},[(0,a.Wm)(j,{src:`${W.url}../imagenes/${e.row.photo}`,style:{width:"40px",height:"40px","border-radius":"50%"}},null,8,["src"])],4)],8,i)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])])),_:1}),(0,a.Wm)(T,{modelValue:W.categoryDialog,"onUpdate:modelValue":o[4]||(o[4]=e=>W.categoryDialog=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(E,{style:{width:"700px","max-width":"90vw"}},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{class:"row items-center q-pb-none"},{default:(0,a.w5)((()=>[r,(0,a.Wm)(R),(0,a.wy)((0,a.Wm)(v,{icon:"close",flat:"",round:"",dense:""},null,512),[[N]])])),_:1}),(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[(0,a.Wm)(G,{onSubmit:q.categoryCreate,onReset:o[3]||(o[3]=e=>W.categoryDialog=!1),class:"q-gutter-md"},{default:(0,a.w5)((()=>[(0,a._)("div",c,[(0,a._)("div",n,[(0,a._)("div",s,[(0,a._)("div",d,[(0,a.Wm)(k,{modelValue:W.category.name,"onUpdate:modelValue":o[1]||(o[1]=e=>W.category.name=e),name:"form",label:"Nombre",dense:"",outlined:"",required:""},null,8,["modelValue"])]),(0,a._)("div",g,[(0,a.Wm)(A,{accept:".jpg, .png",onAdded:q.uploadFile,"auto-upload":"","max-files":"1",label:"Subir foto",flat:"","max-file-size":"5000000",onRejected:q.onRejected,bordered:""},null,8,["onAdded","onRejected"])])])]),(0,a._)("div",p,[(0,a.Wm)(I,{modelValue:W.category.color,"onUpdate:modelValue":o[2]||(o[2]=e=>W.category.color=e),style:{"max-width":"100px"}},null,8,["modelValue"])])]),(0,a.Wm)(M,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(v,{loading:W.loading,icon:"o_delete",label:"Cancelar",color:"red"},null,8,["loading"]),[[N]]),(0,a.Wm)(v,{loading:W.loading,label:"Crear Categoria",color:"green",icon:"check_circle_outline",type:"submit"},null,8,["loading"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(T,{modelValue:W.categoryDialogUpdate,"onUpdate:modelValue":o[8]||(o[8]=e=>W.categoryDialogUpdate=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(E,{style:{width:"700px","max-width":"90vw"}},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{class:"row items-center q-pb-none"},{default:(0,a.w5)((()=>[u,(0,a.Wm)(R),(0,a.wy)((0,a.Wm)(v,{icon:"close",flat:"",round:"",dense:""},null,512),[[N]])])),_:1}),(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[(0,a.Wm)(G,{onSubmit:q.categoryUpdate,onReset:o[7]||(o[7]=e=>W.categoryDialog=!1),class:"q-gutter-md"},{default:(0,a.w5)((()=>[(0,a._)("div",m,[(0,a._)("div",h,[(0,a.Wm)(k,{modelValue:W.category.name,"onUpdate:modelValue":o[5]||(o[5]=e=>W.category.name=e),name:"form",label:"Nombre",dense:"",outlined:"",required:""},null,8,["modelValue"])]),(0,a._)("div",y,[(0,a.Wm)(I,{modelValue:W.category.color,"onUpdate:modelValue":o[6]||(o[6]=e=>W.category.color=e),style:{"max-width":"100px"}},null,8,["modelValue"])])]),(0,a.Wm)(M,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(v,{loading:W.loading,icon:"o_delete",label:"Cancelar",color:"red"},null,8,["loading"]),[[N]]),(0,a.Wm)(v,{loading:W.loading,label:"Modificar Categoria",color:"green",icon:"check_circle_outline",type:"submit"},null,8,["loading"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(T,{modelValue:W.categoryDialogUpdatePhoto,"onUpdate:modelValue":o[10]||(o[10]=e=>W.categoryDialogUpdatePhoto=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(E,{style:{width:"700px","max-width":"90vw"}},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{class:"row items-center q-pb-none"},{default:(0,a.w5)((()=>[f,(0,a.Wm)(R),(0,a.wy)((0,a.Wm)(v,{icon:"close",flat:"",round:"",dense:""},null,512),[[N]])])),_:1}),(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[(0,a.Wm)(G,{onSubmit:q.categoryUpdatePhoto,onReset:o[9]||(o[9]=e=>W.categoryDialog=!1),class:"q-gutter-md"},{default:(0,a.w5)((()=>[(0,a._)("div",w,[(0,a._)("div",_,[(0,a.Wm)(A,{accept:".jpg, .png",onAdded:q.uploadFile,"auto-upload":"","max-files":"1",label:"Subir foto",flat:"","max-file-size":"5000000",onRejected:q.onRejected,bordered:""},null,8,["onAdded","onRejected"])])]),(0,a.Wm)(M,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(v,{loading:W.loading,icon:"o_delete",label:"Cancelar",color:"red"},null,8,["loading"]),[[N]]),(0,a.Wm)(v,{loading:W.loading,label:"Modificar Categoria",color:"green",icon:"check_circle_outline",type:"submit"},null,8,["loading"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})}t(9665);var W=t(7292);const q={name:"CategoryItem",data(){return{url:"https://bjornada.siscenter.org/api/",categoryDialog:!1,categoryDialogUpdatePhoto:!1,categoryDialogUpdate:!1,store:(0,W.A)(),categories:[],category:{},categoryPhoto:"",categoryFilter:"",loading:!1,categoriesColumns:[{name:"options",label:"Opciones",field:"options",align:"left",sortable:!0},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0},{name:"color",label:"Color",field:"color",align:"left",sortable:!0},{name:"photo",label:"Foto",field:"photo",align:"left",sortable:!0}]}},created(){this.categoriesGet()},methods:{uploadFile(e){this.loading=!0;let o=0;const t=this.$q.dialog({title:"Subiendo archivo",message:"Espere por favor... "+o+"%",persistent:!0}),a=new FormData;a.append("file",e[0]),this.$api.post("upload",a,{onUploadProgress:e=>{o=parseInt(Math.round(100*e.loaded/e.total)),t.update({progress:{value:o}})}}).then((e=>{this.categoryPhoto=e.data,this.loading=!1,t.hide()})).catch((e=>{console.log(e),this.loading=!1,t.hide()}))},categoryCreate(){return""===this.categoryPhoto?(this.$q.notify({message:"Debe subir una foto",color:"red",position:"top",icon:"warning"}),!1):""===this.category.color||void 0===this.category.color?(this.$q.notify({message:"Debe ingresar un color",color:"red",position:"top",icon:"warning"}),!1):(this.category.photo=this.categoryPhoto,this.category.hospital_id=this.store.user.hospital_id,void this.$api.post("categories",this.category).then((e=>{this.categories.push(e.data),this.categoryDialog=!1})).catch((e=>{this.$q.notify({color:"negative",message:e.response.data.message,icon:"report_problem",position:"top"})})))},categoryUpdate(){this.loading=!0,this.$api.put("categories/"+this.category.id,this.category).then((e=>{this.categoriesGet(),this.loading=!1,this.categoryDialogUpdate=!1,this.$q.notify({color:"positive",message:"Categoria modificada correctamente",icon:"check_circle_outline",position:"top"})})).catch((e=>{this.$q.notify({color:"negative",message:e.response.data.message,icon:"report_problem",position:"top"})}))},categoryUpdatePhoto(){if(""===this.categoryPhoto)return this.$q.notify({message:"Debe subir una foto",color:"red",position:"top",icon:"warning"}),!1;this.loading=!0,this.category.photo=this.categoryPhoto,this.$api.put("categories/"+this.category.id,this.category).then((e=>{this.categoriesGet(),this.loading=!1,this.categoryDialogUpdatePhoto=!1,this.$q.notify({color:"positive",message:"Categoria modificada correctamente",icon:"check_circle_outline",position:"top"})})).catch((e=>{this.$q.notify({color:"negative",message:e.response.data.message,icon:"report_problem",position:"top"})}))},categoryDelete(e){this.$q.dialog({title:"Eliminar categoria",message:"¿Esta seguro que desea eliminar esta categoria?",cancel:!0,persistent:!0}).onOk((()=>{this.loading=!0,this.$api.delete("categories/"+e.id).then((e=>{this.categoriesGet(),this.loading=!1,this.categoryDialogUpdate=!1,this.$q.notify({color:"positive",message:"Categoria eliminada correctamente",icon:"check_circle_outline",position:"top"})})).catch((e=>{this.$q.notify({color:"negative",message:e.response.data.message,icon:"report_problem",position:"top"})}))})).onCancel((()=>{console.log("Cancel")})).onDismiss((()=>{console.log("Dismissed")}))},categoryUpdateClickPhoto(e){this.category=e,this.categoryDialogUpdatePhoto=!0},categoryUpdateClick(e){this.category=e,this.categoryDialogUpdate=!0},categoryAdd(){this.category={},this.categoryDialog=!0},categoriesGet(){this.$api.get("categories").then((e=>{this.categories=e.data})).catch((e=>{console.log(e),this.$q.notify({color:"negative",message:e.response.data.message,icon:"report_problem",position:"top"})}))},onRejected(e){this.$q.notify({type:"negative",message:`${e.length} el archivo paso las restricciones de validación`})}}};var v=t(1639),C=t(9885),k=t(4458),U=t(3190),x=t(7580),D=t(8879),$=t(6611),V=t(2857),Z=t(7220),Q=t(8479),P=t(3246),j=t(490),S=t(1233),F=t(1357),R=t(3115),A=t(7691),I=t(335),M=t(2074),G=t(136),E=t(8326),T=t(5896),z=t(4653),N=t(1821),O=t(2146),B=t(9984),L=t.n(B);const H=(0,v.Z)(q,[["render",b]]),J=H;L()(q,"components",{QPage:C.Z,QCard:k.Z,QCardSection:U.Z,QTable:x.Z,QBtn:D.Z,QInput:$.Z,QIcon:V.Z,QTd:Z.Z,QBtnDropdown:Q.Z,QList:P.Z,QItem:j.Z,QItemSection:S.Z,QAvatar:F.Z,QItemLabel:R.Z,QChip:A.Z,QImg:I.Z,QDialog:M.Z,QSpace:G.Z,QForm:E.Z,QUploader:T.Z,QColor:z.Z,QCardActions:N.Z}),L()(q,"directives",{ClosePopup:O.Z})}}]);