(globalThis["webpackChunkfront"]=globalThis["webpackChunkfront"]||[]).push([[669],{8783:(e,o,t)=>{"use strict";t.r(o),t.d(o,{default:()=>qe});var l=t(9835),a=t(6970);const d={class:"text-bold"},i={style:{padding:"0",margin:"0"}},s=(0,l._)("b",null,"U:",-1),n=(0,l._)("b",null,"L:",-1),r=(0,l._)("b",null,"V:",-1),c=(0,l._)("b",null,"Dias",-1),u=["href"],p=(0,l._)("div",{class:"text-h6"},"Crear producto",-1),m={class:"row"},h={class:"col-12 col-md-6 q-px-xs"},g={class:"row"},f={class:"col-12"},b={class:"col-12 flex flex-center"},w={class:"col-12 col-md-6 q-px-xs"},j={class:"row"},_={class:"col-12"},k={class:"col-12 flex flex-center"},y=(0,l._)("div",{class:"text-h6"},"Modificar producto",-1),W={class:"row"},V={class:"col-12 col-md-6 q-px-xs"},q={class:"row"},v={class:"col-12"},x={class:"col-12 col-md-6 q-px-xs"},U={class:"row"},C={class:"col-12"},D={class:"col-12 flex flex-center"},$=(0,l._)("div",{class:"text-h6"},"Modificar lote",-1),P={class:"row"},z={class:"col-12 col-md-12 q-px-xs"},S={class:"row"},M={class:"col-12"},Z=(0,l._)("div",{class:"text-h6"},"Agregar lote",-1),Q={class:"row"},L={class:"col-12 col-md-12 q-px-xs"},A={class:"row"},F={class:"col-12"},R=(0,l._)("div",{class:"text-h6"},"Modificar producto",-1),G={class:"row"},I={class:"col-12 flex flex-center"};function E(e,o,t,E,Y,O){const N=(0,l.up)("q-btn"),T=(0,l.up)("q-icon"),B=(0,l.up)("q-input"),H=(0,l.up)("q-avatar"),K=(0,l.up)("q-item-section"),J=(0,l.up)("q-item-label"),X=(0,l.up)("q-item"),ee=(0,l.up)("q-list"),oe=(0,l.up)("q-btn-dropdown"),te=(0,l.up)("q-td"),le=(0,l.up)("q-circular-progress"),ae=(0,l.up)("q-chip"),de=(0,l.up)("q-img"),ie=(0,l.up)("q-table"),se=(0,l.up)("q-card-section"),ne=(0,l.up)("q-space"),re=(0,l.up)("q-select"),ce=(0,l.up)("q-uploader"),ue=(0,l.up)("q-color"),pe=(0,l.up)("q-card-actions"),me=(0,l.up)("q-form"),he=(0,l.up)("q-card"),ge=(0,l.up)("q-dialog"),fe=(0,l.up)("q-page"),be=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(fe,null,{default:(0,l.w5)((()=>[(0,l.Wm)(he,null,{default:(0,l.w5)((()=>[(0,l.Wm)(se,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ie,{rows:Y.products,dense:"",columns:Y.productsColumns,filter:Y.productFilter,"rows-per-page-options":[0]},{"top-right":(0,l.w5)((()=>[(0,l.Wm)(N,{onClick:O.productAdd,loading:Y.loading,color:"primary",label:"Crear producto","no-caps":"",icon:"add_circle_outline",dens:""},null,8,["onClick","loading"]),(0,l.Wm)(N,{flat:"",icon:"refresh",onClick:O.productsGet},null,8,["onClick"]),(0,l.Wm)(B,{modelValue:Y.productFilter,"onUpdate:modelValue":o[0]||(o[0]=e=>Y.productFilter=e),label:"Filtrar",dense:"",outlined:""},{append:(0,l.w5)((()=>[(0,l.Wm)(T,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-options":(0,l.w5)((e=>[(0,l.Wm)(te,{props:e,"auto-width":""},{default:(0,l.w5)((()=>[(0,l.Wm)(oe,{label:"Opciones",color:"primary","no-caps":""},{default:(0,l.w5)((()=>[(0,l.Wm)(ee,null,{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(X,{clickable:"",onClick:o=>O.productUpdateClick(e.row)},{default:(0,l.w5)((()=>[(0,l.Wm)(K,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(H,{icon:"o_edit"})])),_:1}),(0,l.Wm)(K,null,{default:(0,l.w5)((()=>[(0,l.Wm)(J,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Modificar")])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[be]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(X,{clickable:"",onClick:o=>O.productDelete(e.row)},{default:(0,l.w5)((()=>[(0,l.Wm)(K,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(H,{icon:"o_delete"})])),_:1}),(0,l.Wm)(K,null,{default:(0,l.w5)((()=>[(0,l.Wm)(J,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Eliminar")])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[be]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(X,{clickable:"",onClick:o=>O.productUpdateClickPhoto(e.row)},{default:(0,l.w5)((()=>[(0,l.Wm)(K,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(H,{icon:"o_photo"})])),_:1}),(0,l.Wm)(K,null,{default:(0,l.w5)((()=>[(0,l.Wm)(J,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Cambiar foto")])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[be]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(X,{clickable:"",onClick:o=>O.productAddLotClick(e.row)},{default:(0,l.w5)((()=>[(0,l.Wm)(K,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(H,{icon:"add_circle_outline"})])),_:1}),(0,l.Wm)(K,null,{default:(0,l.w5)((()=>[(0,l.Wm)(J,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Agregar lote")])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[be]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-stock":(0,l.w5)((e=>[(0,l.Wm)(te,{props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(le,{"show-value":"",class:(0,a.C_)(`text-${e.row.stock<=e.row.stockMin?"red":e.row.stock>=e.row.stockMax?"green":"blue"} q-ma-md text-bold`),value:e.row.stock,size:"50px",max:e.row.stockMax<=e.row.stock?e.row.stock:e.row.stockMax,min:e.row.stockMin>=e.row.stock?e.row.stock:e.row.stockMin},null,8,["class","value","max","min"]),(0,l._)("span",d,(0,a.zw)(e.row.stock-e.row.stockMin)+" Restantes",1)])),_:2},1032,["props"])])),"body-cell-color":(0,l.w5)((e=>[(0,l.Wm)(te,{props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(ae,{class:"text-bold text-white",style:(0,a.j5)(`background: ${e.row.color};`)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.row.color),1)])),_:2},1032,["style"])])),_:2},1032,["props"])])),"body-cell-lot":(0,l.w5)((e=>[(0,l.Wm)(te,{props:e},{default:(0,l.w5)((()=>[(0,l._)("ul",i,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.row.lots,(e=>((0,l.wg)(),(0,l.iD)("li",{style:{padding:"0",margin:"0"},key:e.id},[(0,l._)("div",null,[s,(0,l.Uk)((0,a.zw)(e.quantity)+" ",1),n,(0,l.Uk)((0,a.zw)(e.batch)+" ",1),r,(0,l.Wm)(ae,{"text-color":"white",dense:"",color:O.restanteDays(e.expiration)<=15?"red":"green"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(O.restanteDays(e.expiration))+" ",1),c])),_:2},1032,["color"]),(0,l.Wm)(N,{round:"",flat:"",icon:"o_delete",class:"q-pa-none q-ma-none",onClick:o=>O.productDeleteLot(e),dense:""},null,8,["onClick"]),(0,l.Wm)(N,{round:"",flat:"",icon:"o_edit",class:"q-pa-none q-ma-none",onClick:o=>O.productUpdateLot(e),dense:""},null,8,["onClick"])])])))),128))])])),_:2},1032,["props"])])),"body-cell-photo":(0,l.w5)((e=>[(0,l.Wm)(te,{props:e,class:"text-center"},{default:(0,l.w5)((()=>[(0,l._)("a",{href:`${Y.url}../imagenes/${e.row.photo}`,target:"_blank"},[(0,l._)("div",{class:"text-center",style:(0,a.j5)(`background: ${e.row.color}`)},[(0,l.Wm)(de,{src:`${Y.url}../imagenes/${e.row.photo}`,style:{width:"40px",height:"40px","border-radius":"50%"}},null,8,["src"])],4)],8,u)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])])),_:1}),(0,l.Wm)(ge,{modelValue:Y.productDialog,"onUpdate:modelValue":o[12]||(o[12]=e=>Y.productDialog=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(he,{style:{width:"700px","max-width":"90vw"}},{default:(0,l.w5)((()=>[(0,l.Wm)(se,{class:"row items-center q-pb-none"},{default:(0,l.w5)((()=>[p,(0,l.Wm)(ne),(0,l.wy)((0,l.Wm)(N,{icon:"close",flat:"",round:"",dense:""},null,512),[[be]])])),_:1}),(0,l.Wm)(se,null,{default:(0,l.w5)((()=>[(0,l.Wm)(me,{onSubmit:O.productCreate,onReset:o[11]||(o[11]=e=>Y.productDialog=!1),class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l._)("div",m,[(0,l._)("div",h,[(0,l._)("div",g,[(0,l._)("div",f,[(0,l.Wm)(re,{modelValue:Y.category,"onUpdate:modelValue":o[1]||(o[1]=e=>Y.category=e),options:Y.categories,label:"Producto",dense:"",outlined:"",required:"",hint:""},null,8,["modelValue","options"]),(0,l.Wm)(B,{modelValue:Y.product.name,"onUpdate:modelValue":o[2]||(o[2]=e=>Y.product.name=e),name:"form",label:"Nombre",dense:"",outlined:"",required:"",hint:""},null,8,["modelValue"]),(0,l.Wm)(B,{modelValue:Y.product.priceCost,"onUpdate:modelValue":o[3]||(o[3]=e=>Y.product.priceCost=e),name:"form",label:"Precio de costo",dense:"",outlined:"",required:"",hint:"",type:"number",step:"0.1"},null,8,["modelValue"]),(0,l.Wm)(B,{modelValue:Y.product.priceSale,"onUpdate:modelValue":o[4]||(o[4]=e=>Y.product.priceSale=e),name:"form",label:"Precio de venta",dense:"",outlined:"",required:"",hint:"",type:"number",step:"0.1"},null,8,["modelValue"]),(0,l.Wm)(B,{modelValue:Y.product.expiration,"onUpdate:modelValue":o[5]||(o[5]=e=>Y.product.expiration=e),name:"form",label:"Fecha de caducidad",dense:"",outlined:"",required:"",hint:"",type:"date"},null,8,["modelValue"]),(0,l.Wm)(B,{modelValue:Y.product.batch,"onUpdate:modelValue":o[6]||(o[6]=e=>Y.product.batch=e),name:"form",label:"Lote",dense:"",outlined:"",required:"",hint:""},null,8,["modelValue"])]),(0,l._)("div",b,[(0,l.Wm)(ce,{accept:".jpg, .png",onAdded:O.uploadFile,"auto-upload":"","max-files":"1",label:"Subir foto",flat:"","max-file-size":"5000000",onRejected:O.onRejected,bordered:""},null,8,["onAdded","onRejected"])])])]),(0,l._)("div",w,[(0,l._)("div",j,[(0,l._)("div",_,[(0,l.Wm)(B,{modelValue:Y.product.stock,"onUpdate:modelValue":o[7]||(o[7]=e=>Y.product.stock=e),name:"form",label:"Stock",dense:"",outlined:"",type:"number",required:"",hint:""},null,8,["modelValue"]),(0,l.Wm)(B,{modelValue:Y.product.stockMin,"onUpdate:modelValue":o[8]||(o[8]=e=>Y.product.stockMin=e),name:"form",label:"Stock minimo",dense:"",outlined:"",type:"number",required:"",hint:""},null,8,["modelValue"]),(0,l.Wm)(B,{modelValue:Y.product.stockMax,"onUpdate:modelValue":o[9]||(o[9]=e=>Y.product.stockMax=e),name:"form",label:"Stock maximo",dense:"",outlined:"",type:"number",required:"",hint:""},null,8,["modelValue"])]),(0,l._)("div",k,[(0,l.Wm)(ue,{modelValue:Y.product.color,"onUpdate:modelValue":o[10]||(o[10]=e=>Y.product.color=e),style:{"max-width":"100px"}},null,8,["modelValue"])])])])]),(0,l.Wm)(pe,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(N,{loading:Y.loading,icon:"o_delete",label:"Cancelar",color:"red"},null,8,["loading"]),[[be]]),(0,l.Wm)(N,{loading:Y.loading,label:"Crear Producto",color:"green",icon:"check_circle_outline",type:"submit"},null,8,["loading"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(ge,{modelValue:Y.productDialogUpdate,"onUpdate:modelValue":o[20]||(o[20]=e=>Y.productDialogUpdate=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(he,{style:{width:"700px","max-width":"90vw"}},{default:(0,l.w5)((()=>[(0,l.Wm)(se,{class:"row items-center q-pb-none"},{default:(0,l.w5)((()=>[y,(0,l.Wm)(ne),(0,l.wy)((0,l.Wm)(N,{icon:"close",flat:"",round:"",dense:""},null,512),[[be]])])),_:1}),(0,l.Wm)(se,null,{default:(0,l.w5)((()=>[(0,l.Wm)(me,{onSubmit:O.productUpdate,onReset:o[19]||(o[19]=e=>Y.productDialog=!1),class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l._)("div",W,[(0,l._)("div",V,[(0,l._)("div",q,[(0,l._)("div",v,[(0,l.Wm)(re,{modelValue:Y.category,"onUpdate:modelValue":o[13]||(o[13]=e=>Y.category=e),options:Y.categories,label:"Producto",dense:"",outlined:"",required:"",hint:""},null,8,["modelValue","options"]),(0,l.Wm)(B,{modelValue:Y.product.name,"onUpdate:modelValue":o[14]||(o[14]=e=>Y.product.name=e),name:"form",label:"Nombre",dense:"",outlined:"",required:"",hint:""},null,8,["modelValue"])])])]),(0,l._)("div",x,[(0,l._)("div",U,[(0,l._)("div",C,[(0,l.Wm)(B,{modelValue:Y.product.stock,"onUpdate:modelValue":o[15]||(o[15]=e=>Y.product.stock=e),name:"form",label:"Stock",dense:"",outlined:"",type:"number",required:"",hint:""},null,8,["modelValue"]),(0,l.Wm)(B,{modelValue:Y.product.stockMin,"onUpdate:modelValue":o[16]||(o[16]=e=>Y.product.stockMin=e),name:"form",label:"Stock minimo",dense:"",outlined:"",type:"number",required:"",hint:""},null,8,["modelValue"]),(0,l.Wm)(B,{modelValue:Y.product.stockMax,"onUpdate:modelValue":o[17]||(o[17]=e=>Y.product.stockMax=e),name:"form",label:"Stock maximo",dense:"",outlined:"",type:"number",required:"",hint:""},null,8,["modelValue"])]),(0,l._)("div",D,[(0,l.Wm)(ue,{modelValue:Y.product.color,"onUpdate:modelValue":o[18]||(o[18]=e=>Y.product.color=e),style:{"max-width":"100px"}},null,8,["modelValue"])])])])]),(0,l.Wm)(pe,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(N,{loading:Y.loading,icon:"o_delete",label:"Cancelar",color:"red"},null,8,["loading"]),[[be]]),(0,l.Wm)(N,{loading:Y.loading,label:"Modificar Producto",color:"green",icon:"check_circle_outline",type:"submit"},null,8,["loading"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(ge,{modelValue:Y.productDialogUpdateLote,"onUpdate:modelValue":o[26]||(o[26]=e=>Y.productDialogUpdateLote=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(he,{style:{width:"350px","max-width":"90vw"}},{default:(0,l.w5)((()=>[(0,l.Wm)(se,{class:"row items-center q-pb-none"},{default:(0,l.w5)((()=>[$,(0,l.Wm)(ne),(0,l.wy)((0,l.Wm)(N,{icon:"close",flat:"",round:"",dense:""},null,512),[[be]])])),_:1}),(0,l.Wm)(se,null,{default:(0,l.w5)((()=>[(0,l.Wm)(me,{onSubmit:O.lotUpdate,class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l._)("div",P,[(0,l._)("div",z,[(0,l._)("div",S,[(0,l._)("div",M,[(0,l.Wm)(B,{modelValue:Y.lot.quantity,"onUpdate:modelValue":o[21]||(o[21]=e=>Y.lot.quantity=e),name:"form",label:"Cantidad",dense:"",outlined:"",type:"number",required:"",hint:""},null,8,["modelValue"]),(0,l.Wm)(B,{modelValue:Y.lot.priceCost,"onUpdate:modelValue":o[22]||(o[22]=e=>Y.lot.priceCost=e),name:"form",label:"Precio de costo",dense:"",outlined:"",type:"number",step:"0.1",required:"",hint:""},null,8,["modelValue"]),(0,l.Wm)(B,{modelValue:Y.lot.priceSale,"onUpdate:modelValue":o[23]||(o[23]=e=>Y.lot.priceSale=e),name:"form",label:"Precio de venta",dense:"",outlined:"",type:"number",step:"0.1",required:"",hint:""},null,8,["modelValue"]),(0,l.Wm)(B,{modelValue:Y.lot.expiration,"onUpdate:modelValue":o[24]||(o[24]=e=>Y.lot.expiration=e),name:"form",label:"Fecha de caducidad",dense:"",outlined:"",type:"date",required:"",hint:""},null,8,["modelValue"]),(0,l.Wm)(B,{modelValue:Y.lot.batch,"onUpdate:modelValue":o[25]||(o[25]=e=>Y.lot.batch=e),name:"form",label:"Lote",dense:"",outlined:"",type:"text",required:"",hint:""},null,8,["modelValue"])])])])]),(0,l.Wm)(pe,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(N,{loading:Y.loading,icon:"o_delete",label:"Cancelar",color:"red"},null,8,["loading"]),[[be]]),(0,l.Wm)(N,{loading:Y.loading,label:"Modificar lote",color:"green",icon:"check_circle_outline",type:"submit"},null,8,["loading"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(ge,{modelValue:Y.productAddLotDialog,"onUpdate:modelValue":o[32]||(o[32]=e=>Y.productAddLotDialog=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(he,{style:{width:"350px","max-width":"90vw"}},{default:(0,l.w5)((()=>[(0,l.Wm)(se,{class:"row items-center q-pb-none"},{default:(0,l.w5)((()=>[Z,(0,l.Wm)(ne),(0,l.wy)((0,l.Wm)(N,{icon:"close",flat:"",round:"",dense:""},null,512),[[be]])])),_:1}),(0,l.Wm)(se,null,{default:(0,l.w5)((()=>[(0,l.Wm)(me,{onSubmit:O.lotInsert,class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l._)("div",Q,[(0,l._)("div",L,[(0,l._)("div",A,[(0,l._)("div",F,[(0,l.Wm)(B,{modelValue:Y.lot.quantity,"onUpdate:modelValue":o[27]||(o[27]=e=>Y.lot.quantity=e),name:"form",label:"Cantidad",dense:"",outlined:"",type:"number",required:"",hint:""},null,8,["modelValue"]),(0,l.Wm)(B,{modelValue:Y.lot.priceCost,"onUpdate:modelValue":o[28]||(o[28]=e=>Y.lot.priceCost=e),name:"form",label:"Precio de costo",dense:"",outlined:"",type:"number",step:"0.1",required:"",hint:""},null,8,["modelValue"]),(0,l.Wm)(B,{modelValue:Y.lot.priceSale,"onUpdate:modelValue":o[29]||(o[29]=e=>Y.lot.priceSale=e),name:"form",label:"Precio de venta",dense:"",outlined:"",type:"number",step:"0.1",required:"",hint:""},null,8,["modelValue"]),(0,l.Wm)(B,{modelValue:Y.lot.expiration,"onUpdate:modelValue":o[30]||(o[30]=e=>Y.lot.expiration=e),name:"form",label:"Fecha de caducidad",dense:"",outlined:"",type:"date",required:"",hint:""},null,8,["modelValue"]),(0,l.Wm)(B,{modelValue:Y.lot.batch,"onUpdate:modelValue":o[31]||(o[31]=e=>Y.lot.batch=e),name:"form",label:"Lote",dense:"",outlined:"",type:"text",required:"",hint:""},null,8,["modelValue"])])])])]),(0,l.Wm)(pe,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(N,{loading:Y.loading,icon:"o_delete",label:"Cancelar",color:"red"},null,8,["loading"]),[[be]]),(0,l.Wm)(N,{loading:Y.loading,label:"Agregar lote",color:"green",icon:"check_circle_outline",type:"submit"},null,8,["loading"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(ge,{modelValue:Y.productDialogUpdatePhoto,"onUpdate:modelValue":o[34]||(o[34]=e=>Y.productDialogUpdatePhoto=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(he,{style:{width:"700px","max-width":"90vw"}},{default:(0,l.w5)((()=>[(0,l.Wm)(se,{class:"row items-center q-pb-none"},{default:(0,l.w5)((()=>[R,(0,l.Wm)(ne),(0,l.wy)((0,l.Wm)(N,{icon:"close",flat:"",round:"",dense:""},null,512),[[be]])])),_:1}),(0,l.Wm)(se,null,{default:(0,l.w5)((()=>[(0,l.Wm)(me,{onSubmit:O.productUpdatePhoto,onReset:o[33]||(o[33]=e=>Y.productDialog=!1),class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l._)("div",G,[(0,l._)("div",I,[(0,l.Wm)(ce,{accept:".jpg, .png",onAdded:O.uploadFile,"auto-upload":"","max-files":"1",label:"Subir foto",flat:"","max-file-size":"5000000",onRejected:O.onRejected,bordered:""},null,8,["onAdded","onRejected"])])]),(0,l.Wm)(pe,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(N,{loading:Y.loading,icon:"o_delete",label:"Cancelar",color:"red"},null,8,["loading"]),[[be]]),(0,l.Wm)(N,{loading:Y.loading,label:"Modificar Producto",color:"green",icon:"check_circle_outline",type:"submit"},null,8,["loading"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})}t(9665);var Y=t(7292),O=t(4376),N=t(3878),T=t.n(N);const B={name:"CategoryItem",data(){return{productDialogUpdateLote:!1,productAddLotDialog:!1,url:"https://bjornada.siscenter.org/api/",productDialog:!1,productDialogUpdatePhoto:!1,productDialogUpdate:!1,store:(0,Y.A)(),products:[],product:{},lot:{},categories:[],category:{},productPhoto:"",productFilter:"",loading:!1,productsColumns:[{name:"options",label:"Opciones",field:"options",align:"left",sortable:!0},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0},{name:"lot",label:"Lote",field:"lot",align:"left",sortable:!0},{name:"stock",label:"Stock",field:"stock",align:"left",sortable:!0},{name:"color",label:"Color",field:"color",align:"left",sortable:!0},{name:"photo",label:"Foto",field:"photo",align:"left",sortable:!0}]}},created(){this.productsGet(),this.$api.get("categories").then((e=>{e.data.forEach((e=>{this.categories.push({label:e.name,value:e.id})})),this.category=this.categories[0]}))},methods:{lotInsert(){this.loading=!0,this.$api.post("lots",this.lot).then((e=>{this.loading=!1,this.productAddLotDialog=!1,this.productsGet()})).catch((e=>{this.loading=!1,this.$q.notify({message:e.response.data.message,color:"negative",icon:"report_problem",position:"top"})}))},lotUpdate(){this.loading=!0,this.$api.put("lots/"+this.lot.id,this.lot).then((e=>{this.loading=!1,this.productDialogUpdateLote=!1,this.productsGet()})).catch((e=>{this.loading=!1,this.$q.notify({message:e.response.data.message,color:"negative",icon:"report_problem",position:"top"})}))},productUpdateLot(e){this.productDialogUpdateLote=!0,this.lot=e},productDeleteLot(e){this.$q.dialog({title:"Eliminar",message:"¿Estas seguro de eliminar el lote?",cancel:!0,persistent:!0}).onOk((()=>{this.loading=!0,this.$api.delete("lots/"+e.id).then((e=>{this.productsGet()}))})).onCancel((()=>{})).onDismiss((()=>{}))},restanteDays(e){const o=T()(),t=T()(e),l=t.diff(o,"days");return l},uploadFile(e){this.loading=!0;let o=0;const t=this.$q.dialog({title:"Subiendo archivo",message:"Espere por favor... "+o+"%",persistent:!0}),l=new FormData;l.append("file",e[0]),this.$api.post("upload",l,{onUploadProgress:e=>{o=parseInt(Math.round(100*e.loaded/e.total)),t.update({progress:{value:o}})}}).then((e=>{this.productPhoto=e.data,this.loading=!1,t.hide()})).catch((e=>{console.log(e),this.loading=!1,t.hide()}))},productCreate(){return""===this.productPhoto?(this.$q.notify({message:"Debe subir una foto",color:"red",position:"top",icon:"warning"}),!1):""===this.product.color||void 0===this.product.color?(this.$q.notify({message:"Debe ingresar un color",color:"red",position:"top",icon:"warning"}),!1):(this.product.photo=this.productPhoto,this.product.category_id=this.category.value,this.product.hospital_id=this.store.user.hospital_id,void this.$api.post("products",this.product).then((e=>{this.productsGet(),this.productDialog=!1})).catch((e=>{this.$q.notify({color:"negative",message:e.response.data.message,icon:"report_problem",position:"top"})})))},productUpdate(){this.loading=!0,this.$api.put("products/"+this.product.id,this.product).then((e=>{this.productsGet(),this.loading=!1,this.productDialogUpdate=!1,this.$q.notify({color:"positive",message:"Producto modificada correctamente",icon:"check_circle_outline",position:"top"})})).catch((e=>{this.$q.notify({color:"negative",message:e.response.data.message,icon:"report_problem",position:"top"})})).finally((()=>{this.loading=!1}))},productUpdatePhoto(){if(""===this.productPhoto)return this.$q.notify({message:"Debe subir una foto",color:"red",position:"top",icon:"warning"}),!1;this.loading=!0,this.product.photo=this.productPhoto,this.$api.put("products/"+this.product.id,this.product).then((e=>{this.productsGet(),this.loading=!1,this.productDialogUpdatePhoto=!1,this.$q.notify({color:"positive",message:"Producto modificada correctamente",icon:"check_circle_outline",position:"top"})})).catch((e=>{this.$q.notify({color:"negative",message:e.response.data.message,icon:"report_problem",position:"top"})}))},productDelete(e){this.$q.dialog({title:"Eliminar producto",message:"¿Esta seguro que desea eliminar esta producto?",cancel:!0,persistent:!0}).onOk((()=>{this.loading=!0,this.$api.delete("products/"+e.id).then((e=>{this.productsGet(),this.loading=!1,this.productDialogUpdate=!1,this.$q.notify({color:"positive",message:"Producto eliminada correctamente",icon:"check_circle_outline",position:"top"})})).catch((e=>{this.$q.notify({color:"negative",message:e.response.data.message,icon:"report_problem",position:"top"})})).finally((()=>{this.loading=!1}))})).onCancel((()=>{console.log("Cancel")})).onDismiss((()=>{console.log("Dismissed")}))},productAddLotClick(e){this.product=e,this.lot={product_id:e.id,hospital_id:e.hospital_id,quantity:0,priceCost:0,priceSale:0,expiration:T()().format("YYYY-MM-DD"),batch:""},this.productAddLotDialog=!0},productUpdateClickPhoto(e){this.product=e,this.productDialogUpdatePhoto=!0},productUpdateClick(e){this.product=e,this.productDialogUpdate=!0},productAdd(){this.product={expiration:O.ZP.formatDate(new Date,"YYYY-MM-DD")},this.productDialog=!0},productsGet(){this.loading=!0,this.$api.get("products").then((e=>{this.products=e.data})).catch((e=>{this.$q.notify({color:"negative",message:e.response.data.message,icon:"report_problem",position:"top"})})).finally((()=>{this.loading=!1}))},onRejected(e){this.$q.notify({type:"negative",message:`${e.length} el archivo paso las restricciones de validación`})}}};var H=t(1639),K=t(9885),J=t(4458),X=t(3190),ee=t(7580),oe=t(8879),te=t(6611),le=t(2857),ae=t(7220),de=t(8479),ie=t(3246),se=t(490),ne=t(1233),re=t(1357),ce=t(3115),ue=t(3302),pe=t(7691),me=t(335),he=t(2074),ge=t(136),fe=t(8326),be=t(6384),we=t(5896),je=t(4653),_e=t(1821),ke=t(2146),ye=t(9984),We=t.n(ye);const Ve=(0,H.Z)(B,[["render",E]]),qe=Ve;We()(B,"components",{QPage:K.Z,QCard:J.Z,QCardSection:X.Z,QTable:ee.Z,QBtn:oe.Z,QInput:te.Z,QIcon:le.Z,QTd:ae.Z,QBtnDropdown:de.Z,QList:ie.Z,QItem:se.Z,QItemSection:ne.Z,QAvatar:re.Z,QItemLabel:ce.Z,QCircularProgress:ue.Z,QChip:pe.Z,QImg:me.Z,QDialog:he.Z,QSpace:ge.Z,QForm:fe.Z,QSelect:be.Z,QUploader:we.Z,QColor:je.Z,QCardActions:_e.Z}),We()(B,"directives",{ClosePopup:ke.Z})},6700:(e,o,t)=>{var l={"./af":3902,"./af.js":3902,"./ar":6314,"./ar-dz":5666,"./ar-dz.js":5666,"./ar-kw":6591,"./ar-kw.js":6591,"./ar-ly":7900,"./ar-ly.js":7900,"./ar-ma":5667,"./ar-ma.js":5667,"./ar-sa":4092,"./ar-sa.js":4092,"./ar-tn":1379,"./ar-tn.js":1379,"./ar.js":6314,"./az":1699,"./az.js":1699,"./be":8988,"./be.js":8988,"./bg":7437,"./bg.js":7437,"./bm":7947,"./bm.js":7947,"./bn":2851,"./bn-bd":4905,"./bn-bd.js":4905,"./bn.js":2851,"./bo":7346,"./bo.js":7346,"./br":1711,"./br.js":1711,"./bs":3706,"./bs.js":3706,"./ca":112,"./ca.js":112,"./cs":6406,"./cs.js":6406,"./cv":1853,"./cv.js":1853,"./cy":9766,"./cy.js":9766,"./da":6836,"./da.js":6836,"./de":9320,"./de-at":4904,"./de-at.js":4904,"./de-ch":6710,"./de-ch.js":6710,"./de.js":9320,"./dv":3274,"./dv.js":3274,"./el":286,"./el.js":286,"./en-au":143,"./en-au.js":143,"./en-ca":237,"./en-ca.js":237,"./en-gb":2428,"./en-gb.js":2428,"./en-ie":3349,"./en-ie.js":3349,"./en-il":3764,"./en-il.js":3764,"./en-in":7809,"./en-in.js":7809,"./en-nz":9851,"./en-nz.js":9851,"./en-sg":5594,"./en-sg.js":5594,"./eo":4483,"./eo.js":4483,"./es":2184,"./es-do":5777,"./es-do.js":5777,"./es-mx":9356,"./es-mx.js":9356,"./es-us":8496,"./es-us.js":8496,"./es.js":2184,"./et":7578,"./et.js":7578,"./eu":2092,"./eu.js":2092,"./fa":5927,"./fa.js":5927,"./fi":171,"./fi.js":171,"./fil":2416,"./fil.js":2416,"./fo":9937,"./fo.js":9937,"./fr":5172,"./fr-ca":8249,"./fr-ca.js":8249,"./fr-ch":7541,"./fr-ch.js":7541,"./fr.js":5172,"./fy":7907,"./fy.js":7907,"./ga":6361,"./ga.js":6361,"./gd":2282,"./gd.js":2282,"./gl":2630,"./gl.js":2630,"./gom-deva":680,"./gom-deva.js":680,"./gom-latn":6220,"./gom-latn.js":6220,"./gu":6272,"./gu.js":6272,"./he":5540,"./he.js":5540,"./hi":6067,"./hi.js":6067,"./hr":9669,"./hr.js":9669,"./hu":3396,"./hu.js":3396,"./hy-am":6678,"./hy-am.js":6678,"./id":4812,"./id.js":4812,"./is":4193,"./is.js":4193,"./it":7863,"./it-ch":959,"./it-ch.js":959,"./it.js":7863,"./ja":6741,"./ja.js":6741,"./jv":8657,"./jv.js":8657,"./ka":3290,"./ka.js":3290,"./kk":8418,"./kk.js":8418,"./km":7687,"./km.js":7687,"./kn":1375,"./kn.js":1375,"./ko":2641,"./ko.js":2641,"./ku":3518,"./ku.js":3518,"./ky":5459,"./ky.js":5459,"./lb":1978,"./lb.js":1978,"./lo":6915,"./lo.js":6915,"./lt":8948,"./lt.js":8948,"./lv":2548,"./lv.js":2548,"./me":8608,"./me.js":8608,"./mi":333,"./mi.js":333,"./mk":1876,"./mk.js":1876,"./ml":999,"./ml.js":999,"./mn":4098,"./mn.js":4098,"./mr":6111,"./mr.js":6111,"./ms":3717,"./ms-my":265,"./ms-my.js":265,"./ms.js":3717,"./mt":8980,"./mt.js":8980,"./my":6895,"./my.js":6895,"./nb":5348,"./nb.js":5348,"./ne":1493,"./ne.js":1493,"./nl":4419,"./nl-be":5576,"./nl-be.js":5576,"./nl.js":4419,"./nn":6907,"./nn.js":6907,"./oc-lnc":2321,"./oc-lnc.js":2321,"./pa-in":9239,"./pa-in.js":9239,"./pl":7627,"./pl.js":7627,"./pt":5703,"./pt-br":1623,"./pt-br.js":1623,"./pt.js":5703,"./ro":2747,"./ro.js":2747,"./ru":4420,"./ru.js":4420,"./sd":2148,"./sd.js":2148,"./se":2461,"./se.js":2461,"./si":2783,"./si.js":2783,"./sk":3306,"./sk.js":3306,"./sl":341,"./sl.js":341,"./sq":2768,"./sq.js":2768,"./sr":2451,"./sr-cyrl":3371,"./sr-cyrl.js":3371,"./sr.js":2451,"./ss":8812,"./ss.js":8812,"./sv":3820,"./sv.js":3820,"./sw":3615,"./sw.js":3615,"./ta":2869,"./ta.js":2869,"./te":2044,"./te.js":2044,"./tet":5861,"./tet.js":5861,"./tg":6999,"./tg.js":6999,"./th":1772,"./th.js":1772,"./tk":7443,"./tk.js":7443,"./tl-ph":9786,"./tl-ph.js":9786,"./tlh":2812,"./tlh.js":2812,"./tr":6952,"./tr.js":6952,"./tzl":9573,"./tzl.js":9573,"./tzm":5990,"./tzm-latn":6961,"./tzm-latn.js":6961,"./tzm.js":5990,"./ug-cn":2610,"./ug-cn.js":2610,"./uk":9498,"./uk.js":9498,"./ur":3970,"./ur.js":3970,"./uz":9006,"./uz-latn":26,"./uz-latn.js":26,"./uz.js":9006,"./vi":9962,"./vi.js":9962,"./x-pseudo":8407,"./x-pseudo.js":8407,"./yo":1962,"./yo.js":1962,"./zh-cn":8909,"./zh-cn.js":8909,"./zh-hk":4014,"./zh-hk.js":4014,"./zh-mo":996,"./zh-mo.js":996,"./zh-tw":6327,"./zh-tw.js":6327};function a(e){var o=d(e);return t(o)}function d(e){if(!t.o(l,e)){var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return l[e]}a.keys=function(){return Object.keys(l)},a.resolve=d,e.exports=a,a.id=6700}}]);